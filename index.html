<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pulse Bomb</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="header-container">
      <img src="https://i.postimg.cc/BnJZWnT2/1000012716-removebg-preview.png" alt="Pulse Bomb Logo" class="logo" />
      <nav>
        <a href="index.html" class="active">Home</a>
        <a href="anime.html">Anime News</a>
        <a href="games.html">Game News</a>
        <a href="whatif.html">What If</a>
      </nav>
    </div>
  </header>


  <main>
    <div class="article" style="font-family:Arial, sans-serif; line-height:1.8; color:#f5f5f5; background-color:#121212; padding:20px; border-radius:12px; max-width:800px; margin:auto;">
      <h2 style="color:#66ccff;">
        What If Genshin Impact Never Existed? 
        <img src="https://i.postimg.cc/TYTr2p2D/1000012774-removebg-preview.png" alt="emoji" style="width:45px; height:45px; vertical-align:text-bottom; margin-left:10px;">
      </h2>

      <div style="margin:20px 0;">
        <img src="https://i.postimg.cc/50cChtkj/5389ec4f73cc58d737c48d55528e9dc2.jpg" alt="Genshin Impact Fan Art" style="width:100%; max-width:700px; border-radius:12px;">
      </div>

      <div id="short-content">
        <p>Genshin Impact has become one of the most iconic open-world RPGs of the modern era. But have you ever wondered what the gaming world would look like if it never existed?</p>
      </div>

      <div id="full-content" style="display:none;">
        <p>Without <strong>Genshin Impact</strong>, there would be no Teyvat to explore, no Paimon guiding (or annoying) us, and no endless grind for primogems. The massive community that grew around characters like Raiden Shogun, Zhongli, and Hu Tao wouldn’t exist, and countless friendships (and memes) might have never happened.</p>
      </div>
    
  <div id="short-content">
    <p>Genshin Impact has become one of the most iconic open-world RPGs of the modern era. But have you ever wondered what the gaming world would look like if it never existed?</p>
  </div>

  <div id="full-content" style="display:none;">
    <p>Without <strong>Genshin Impact</strong>, there would be no Teyvat to explore, no Paimon guiding (or annoying) us, and no endless grind for primogems. The massive community that grew around characters like Raiden Shogun, Zhongli, and Hu Tao wouldn’t exist, and countless friendships (and memes) might have never happened.</p>

    <h3 style="color:#66ccff;">What if?</h3>
    <ul>
      <li>What if Paimon never became the “Emergency Food” mascot?</li>
      <li>What if Teyvat remained just a dream in a developer’s notebook?</li>
      <li>What if players never had the thrill of pulling five-star characters?</li>
      <li>What if Resin burnout was never a thing?</li>
      <li>What if TikTok, Twitter, and YouTube weren’t flooded with Genshin content?</li>
      <li>What if the gacha model didn’t gain so much attention globally?</li>
      <li>What if millions of gamers never felt the pain of losing a 50/50?</li>
    </ul>

    <p>Sure, without Genshin, we might’ve saved money... maybe even had a healthier sleep schedule. But the world of gaming would’ve missed out on a beautiful blend of storytelling, music, design, and community connection.</p>

    <p>A world without Genshin Impact might be quieter, simpler — but it would also be far less magical.</p>

    <p style="color:#aaa; font-style:italic;">Written by unknown person</p>
  </div>

  <button id="toggleBtn" onclick="toggleArticle()" style="background-color:#66ccff; color:#121212; border:none; padding:10px 16px; border-radius:8px; cursor:pointer; margin-top: 10px;">Read More</button>
</div>

<script>
  function toggleArticle() {
    var full = document.getElementById("full-content");
    var btn = document.getElementById("toggleBtn");
    if (full.style.display === "none") {
      full.style.display = "block";
      btn.textContent = "Read Less";
    } else {
      full.style.display = "none";
      btn.textContent = "Read More";
    }
  }
    

</script>
  <div class="reaction" data-id="post-naruto1" style="margin-top:10px;">
    <img
      src="https://i.postimg.cc/sDzKyKfC/1000012794-removebg-preview.png"
      onclick="handleReaction(this, 'post-naruto1')"
      class="reaction-img"
      data-default="https://i.postimg.cc/sDzKyKfC/1000012794-removebg-preview.png"
      data-active="https://i.postimg.cc/XJDxn0v2/1000012790-removebg-preview.png"
      alt="Like button"
      style="width:30px; cursor:pointer;"
    />
    <span id="count-post-naruto1" style="margin-left:8px; font-weight:bold;">0</span>
  </div>
<script>
  function toggleArticle() {
    var full = document.getElementById("full-content");
    var btn = document.getElementById("toggleBtn");
    if (full.style.display === "none") {
      full.style.display = "block";
      btn.textContent = "Read Less";
    } else {
      full.style.display = "none";
      btn.textContent = "Read More";
    }
  }

  fetch('https://api.countapi.xyz/hit/pulsebomb.site/genshin1')
    .then(res => res.json())
    .then(data => {
      document.getElementById("view-count").textContent = data.value;
    });
</script>

<section id="comments-section" style="max-width: 800px; margin: 40px auto; color: #fff;">
  <h2>Comments</h2>

  <form id="comment-form" style="margin-bottom: 20px;">
    <input type="text" id="username" placeholder="Your name" required style="padding: 8px; width: 30%; margin-right: 10px;">
    <input type="text" id="comment" placeholder="Your comment" required style="padding: 8px; width: 50%; margin-right: 10px;">
    <button type="submit" style="padding: 8px;">Post</button>
  </form>

  <div id="comments-list" style="background:#222; padding: 15px; border-radius: 8px; max-height: 400px; overflow-y: auto;">
    <!-- التعليقات هنا هتظهر -->
  </div>
</section>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBdr8mcODakhdOoJqRjnUALoPuO8ORBGDE",
    authDomain: "kat0-ba66c.firebaseapp.com",
    databaseURL: "https://kat0-ba66c-default-rtdb.firebaseio.com",
    projectId: "kat0-ba66c",
    storageBucket: "kat0-ba66c.firebasestorage.app",
    messagingSenderId: "216688927261",
    appId: "1:216688927261:web:d71f654adc73d2074f5cf4",
    measurementId: "G-C6QDGB1Q5N"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const commentForm = document.getElementById('comment-form');
  const commentsList = document.getElementById('comments-list');

  // تحميل وعرض التعليقات
  function loadComments() {
    db.ref('comments').on('value', snapshot => {
      commentsList.innerHTML = '';
      const comments = snapshot.val();
      if (comments) {
        Object.entries(comments).forEach(([key, comment]) => {
          const div = document.createElement('div');
          div.style.borderBottom = "1px solid #444";
          div.style.padding = "10px 0";

          const avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(comment.username)}&background=0D8ABC&color=fff&size=64`;

          // بناء ردود التعليقات (لو فيه)
          let repliesHtml = '';
          if(comment.replies) {
            Object.entries(comment.replies).forEach(([rKey, reply]) => {
              repliesHtml += `
                <div style="margin-left: 50px; margin-top: 8px; padding: 8px; background:#333; border-radius: 6px;">
                  <strong style="color:#00aaff;">${escapeHTML(reply.username)}</strong>: ${escapeHTML(reply.text)}
                </div>`;
            });
          }

          // اعجاب (Like) وعداد اللايكات
          const likeCount = comment.likes ? Object.keys(comment.likes).length : 0;

          div.innerHTML = `
            <div style="display: flex; gap: 10px; align-items: center;">
              <img src="${avatarUrl}" alt="avatar" style="width: 48px; height: 48px; border-radius: 50%;">
              <div style="flex: 1;">
                <div style="font-weight: bold; font-size: 16px; color: #00aaff;">${escapeHTML(comment.username)}</div>
                <div style="margin: 4px 0; font-size: 15px; color: #ddd;">${escapeHTML(comment.text)}</div>
                
                <div style="display: flex; align-items: center; gap: 10px;">
                  <div class="reaction" data-id="${key}" style="margin-top:10px; cursor:pointer; user-select:none;">
                    <img
                      src="https://i.postimg.cc/sDzKyKfC/1000012794-removebg-preview.png"
                      class="reaction-img"
                      data-default="https://i.postimg.cc/sDzKyKfC/1000012794-removebg-preview.png"
                      data-active="https://i.postimg.cc/XJDxn0v2/1000012790-removebg-preview.png"
                      alt="Like button"
                      style="width:30px;"
                    />
                    <span id="count-${key}" style="margin-left:8px; font-weight:bold;">${likeCount}</span>
                  </div>

                  <button onclick="showReplyForm('${key}')" style="background:#00aaff; border:none; padding:4px 8px; color:#fff; border-radius:4px; cursor:pointer;">Reply</button>
                </div>

                <div id="reply-form-${key}" style="display:none; margin-top:10px;">
                  <input type="text" id="reply-username-${key}" placeholder="Your name" style="padding: 6px; width: 120px; margin-right: 10px;">
                  <input type="text" id="reply-text-${key}" placeholder="Your reply" style="padding: 6px; width: 300px; margin-right: 10px;">
                  <button onclick="postReply('${key}')" style="padding: 6px 12px; background:#00aaff; color:#fff; border:none; border-radius:4px; cursor:pointer;">Send</button>
                  <button onclick="hideReplyForm('${key}')" style="padding: 6px 12px; background:#444; color:#fff; border:none; border-radius:4px; cursor:pointer;">Cancel</button>
                </div>

                ${repliesHtml}
              </div>
            </div>
          `;

          commentsList.appendChild(div);

          // ضبط حالة اللايك (لو المستخدم حب يكرر العملية احنا بنسويها بشكل أبسط هينا)
          const reactionDiv = div.querySelector('.reaction');
          const img = reactionDiv.querySelector('img');
          const span = reactionDiv.querySelector('span');

          reactionDiv.onclick = () => {
            const userId = getUserId(); // هتحتاج تعرف اسم أو معرف المستخدم لتخزين اللايكات بشكل دقيق
            if(!userId) return alert('Please enter your name to like.');

            // ضبط المسار للايك في Firebase
            const likeRef = db.ref(`comments/${key}/likes/${userId}`);

            likeRef.once('value').then(snapshot => {
              if(snapshot.exists()) {
                likeRef.remove();
                span.textContent = parseInt(span.textContent) - 1;
                img.src = img.dataset.default;
              } else {
                likeRef.set(true);
                span.textContent = parseInt(span.textContent) + 1;
                img.src = img.dataset.active;
              }
            });
          };
        });
      } else {
        commentsList.innerHTML = '<p>No comments yet.</p>';
      }
    });
  }

  // عرض فورم الرد
  function showReplyForm(commentId) {
    document.getElementById(`reply-form-${commentId}`).style.display = 'block';
  }

  // إخفاء فورم الرد
  function hideReplyForm(commentId) {
    document.getElementById(`reply-form-${commentId}`).style.display = 'none';
  }

  // إرسال رد جديد
  function postReply(commentId) {
    const usernameInput = document.getElementById(`reply-username-${commentId}`);
    const textInput = document.getElementById(`reply-text-${commentId}`);

    const username = usernameInput.value.trim();
    const text = textInput.value.trim();

    if(!username || !text) {
      alert('Please enter your name and reply text.');
      return;
    }

    const repliesRef = db.ref(`comments/${commentId}/replies`);
    repliesRef.push({ username, text })
      .then(() => {
        usernameInput.value = '';
        textInput.value = '';
        hideReplyForm(commentId);
      });
  }

  // إرسال تعليق جديد
  commentForm.addEventListener('submit', e => {
    e.preventDefault();
    const username = document.getElementById('username').value.trim();
    const text = document.getElementById('comment').value.trim();
    if(username && text) {
      db.ref('comments').push({ username, text });
      commentForm.reset();
    }
  });

  // دالة هروب من XSS
  function escapeHTML(str) {
    return str.replace(/[&<>"']/g, m => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' })[m]);
  }

  // دالة مؤقتة لجلب اسم المستخدم للايك (ممكن تعدلها حسب حاجتك)
  function getUserId() {
    const username = document.getElementById('username').value.trim();
    return username ? username.replace(/\s+/g, '_').toLowerCase() : null;
  }

  loadComments();
</script>
       <section>
  <h2>Latest Anime  News</h2>
  <h2>Naruto Launches Cooking Channel: “Ramen no Jutsu” Goes Viral <img src="https://i.postimg.cc/SKfqpjYr/1000012771-removebg-preview.png" alt="emoji" style="width:45px; height:45px; vertical-align: text-bottom; margin-left: 10px;"> </h2>
  <img src="https://i.postimg.cc/jdyGXwY2/b3cf4e6f4635923021aba32b0b4adc45.jpg" alt="Naruto Cooking Ramen" style="width: 100%; max-width: 600px; height: auto; border-radius: 6px; margin-top: 10px; display: block;" />
  <p>After years of ninja missions and saving the world, Naruto Uzumaki has discovered his true calling — cooking ramen. The Seventh Hokage officially launched his new YouTube channel, <strong>“Ramen no Jutsu”</strong>.</p>
  <p>“Fighting was cool, but nothing beats a hot bowl of miso ramen,” Naruto told viewers in his first video, where he attempted to recreate the legendary Ichiraku recipe.</p>
  <p>Sasuke reportedly unsubscribed immediately, calling it a “betrayal of the ninja way.” Meanwhile, fans are going wild over his shadow clone technique to summon instant noodles.</p>
</article>   
    <section>
  <h2>Latest Game News</h2>
  <article>
  <h2>Dante Quits Demon Hunting to Start a Coffee Shop: ‘Devil May Brew’ Now Open in Red Grave City</h2>

  <img src="https://i.postimg.cc/NMSQdwQQ/93fff15e673f4554dbc5b8679dcb92a1.jpg" alt="Dante Coffee Shop" />
  <p>After decades of slaying demons, Dante decided it's time for a peaceful life. “I got tired of screaming demons and wanted screaming espresso machines instead,” he said during the grand opening of his new coffee shop, <em>Devil May Brew</em>.</p>
  <p>The shop offers hellishly strong coffee and a signature drink called “Demon Slayer Latte,” which comes with a complimentary silver bullet cookie.</p>
  <p>Nero was seen protesting outside the shop, yelling “You’re too soft, old man!”</p>
  </article>
</section>
    <section>
    <section>
      <h2>Latest Game News</h2>
      <article>
        <h3>Genshin Player Forgets Real Life After Hardcore Farming Week</h3>
        <img src="https://i.postimg.cc/xTTyk59T/IMG-20250517-015729.jpg" alt="Genshin Addiction" />
        <p>
          After 7 straight days of resin grinding and artifact farming, a devoted Genshin Impact player was last seen mistaking his fridge for a Teleport Waypoint...
        </p>
      </article>
    </section>

    <section>
      <h2>Latest Anime News</h2>
<section>
      <article>
        <h3>Mikasa Files for Divorce and Expresses Her Feelings</h3>
        <img src="https://i.postimg.cc/2SMrt6bq/7dbfb7a34055389b0b1e34444656d789.jpg" alt="Mikasa Divorce" style="width:100%; max-width:500px; border-radius:8px; margin-top:10px;"/>
        <p>Mikasa has officially divorced and says, <em>"Now I feel free. I hate men. Where are you, Eren? I miss you."</em> This emotional statement has shocked fans worldwide and sparked intense discussions online. Apparently, even anime characters need a break sometimes!</p>
      </article>
    </section>
      <!-- باقي المقالات -->
    </section>

    <section>
      
      <!-- مقالات قادمة -->
    </section>

    
  <!-- باقي محتوى الصفحة -->

  <div id="view-count" style="font-size: 24px; display: flex; justify-content: center; align-items: center; gap: 12px; margin-top: 20px;">
    <img src="https://i.postimg.cc/0NfR7Rzv/1000012782-removebg-preview.png" alt="eye icon" style="width: 30px; height: 30px;" />
    <span>Views: </span>
    <span id="count">Loading...</span>
  </div>

  <script>
    fetch('https://abacus.jasoncameron.dev/hit/pulsebomb/homepage')
      .then(res => res.json())
      .then(data => {
        document.getElementById('count').innerText = data.value;
      })
      .catch(err => {
        document.getElementById('count').innerText = "Failed to load";
        console.error(err);
      });
  </script>


  <!-- حاجات الصفحة -->

  <footer>
    &copy; 2025 Pulse Bomb. All rights reserved.
  </footer> 
<script src="reactions.js"></script>
    <script>
  window.addEventListener('load', () => {
    const commentsSection = document.getElementById('comments-section');
    if (commentsSection) {
      document.body.appendChild(commentsSection); // ينقل العنصر ليكون آخر شيء في <body>
    }
  });
    </script>
    </body>
    
</html>
